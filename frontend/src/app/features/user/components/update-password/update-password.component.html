<form [formGroup]="passwordForm" (ngSubmit)="onUpdatePassword()">

  @if (message) {
    <div class="alert alert-success">{{ message }}</div>
  }
  @if (error) {
    <div class="alert alert-danger">{{ error }}</div>
  }

  <div class="mb-3">
    <label for="oldPassword" class="form-label fw-bold">Current Password</label>
    <input
      type="password"
      id="oldPassword"
      class="form-control"
      formControlName="oldPassword"
      [class.is-invalid]="passwordForm.get('oldPassword')?.invalid && passwordForm.get('oldPassword')?.touched"
    />
    @if (passwordForm.get('oldPassword')?.invalid && passwordForm.get('oldPassword')?.touched) {
      <div class="invalid-feedback">Current password is required.</div>
    }
  </div>

  <div class="mb-3">
    <label for="newPassword" class="form-label fw-bold">New Password</label>
    <input
      type="password"
      id="newPassword"
      class="form-control"
      formControlName="newPassword"
      [class.is-invalid]="passwordForm.get('newPassword')?.invalid && passwordForm.get('newPassword')?.touched"
    />
    @if (passwordForm.get('newPassword')?.errors?.['minlength']) {
      <div class="invalid-feedback">Password must be at least 8 characters long.</div>
    }
  </div>

  <div class="mb-4">
    <label for="confirmPassword" class="form-label fw-bold">Confirm New Password</label>
    <input
      type="password"
      id="confirmPassword"
      class="form-control"
      formControlName="confirmPassword"
      [class.is-invalid]="passwordForm.errors?.['passwordMismatch'] && passwordForm.get('confirmPassword')?.touched"
    />
    @if (passwordForm.errors?.['passwordMismatch'] && passwordForm.get('confirmPassword')?.touched) {
      <div class="invalid-feedback">Passwords do not match.</div>
    }
  </div>

  <div class="d-grid">
    <button
      type="submit"
      class="btn btn-primary"
      [disabled]="passwordForm.invalid">
      Change Password
    </button>
  </div>
</form>
